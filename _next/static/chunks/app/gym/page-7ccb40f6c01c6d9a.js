(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[195],{5052:function(e,t,n){Promise.resolve().then(n.bind(n,1621))},1621:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n(7437),i=n(2265),r=n(428),o=n.n(r),a=n(3771),c=n(1490),l=()=>{let[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=new a.wF("qr-code-scanner",{fps:20,qrbox:450,facingMode:"environment"});return e.render(l),()=>{e.stop()}},[]);let l=async e=>{t(e);let n=c.Z.get("previousQR");if(e!==n){c.Z.set("previousQR",e);try{console.log("hi");let t=await fetch("https://api.pwnme.in/gym/qrcode.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrCode:e})}),n=await t.json();r(JSON.stringify(n,null,2))}catch(e){console.error("API Error:",e)}}};return(0,s.jsxs)("div",{className:"jsx-759f2130bede532 qr-scanner-container",children:[(0,s.jsx)("div",{id:"qr-code-scanner",className:"jsx-759f2130bede532 qr-scanner"}),e&&(0,s.jsxs)("div",{className:"jsx-759f2130bede532 scanned-data",children:[(0,s.jsx)("h2",{className:"jsx-759f2130bede532",children:"Entry Status:"}),n&&(0,s.jsx)("pre",{className:"jsx-759f2130bede532 "+"mt-2 ".concat("Success"===JSON.parse(n).status?"text-green-500":"text-red-500"),children:JSON.parse(n).message})]}),(0,s.jsx)(o(),{id:"759f2130bede532",children:".qr-scanner-container.jsx-759f2130bede532{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;height:100vh}.qr-scanner.jsx-759f2130bede532{width:80%;max-width:450px;margin:0 auto}.scanned-data.jsx-759f2130bede532{margin-top:20px;text-align:center}"})]})},d=n(171);n(6518);var f=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=c.Z.get("sessions");e?fetch("https://api.pwnme.in/mess/verify-session.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:e})}).then(e=>e.json()).then(e=>{"success"===e.status?"gym"===e.role&&t(!0):(d.Am.error("Session expired. Please log in again.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),window.location.href="/auth")}).catch(e=>{console.error("Session verification failed:",e),window.location.href="/auth"}):window.location.href="/auth"},[]),(0,s.jsxs)("div",{children:[e?(0,s.jsx)(l,{}):null,(0,s.jsx)(d.Ix,{})]})}}},function(e){e.O(0,[52,560,971,596,744],function(){return e(e.s=5052)}),_N_E=e.O()}]);